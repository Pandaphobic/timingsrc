<!DOCTYPE html>
<html>
  <head>
    <!-- requirejs config -->
    <script>
      var require = {
        baseUrl : '../',
      };
    </script>
    <!-- requirejs -->
    <script type="text/javascript" src="../../docs/lib/require.js"></script>
    <!--  main -->
    <script text="javascript">

      require(['test/main'], function (timingsrc) {

        const isMoving = timingsrc.motionutils.isMoving;


        function run(){

          let to = new timingsrc.TimingObject();
          let s = new timingsrc.Schedule(to);

          to.on("change", function() {
            if (isMoving(to.vector)) {
              s.start();
            } else {
              s.stop();
            }
          });

          // Hook up buttons UI
          document.getElementById('play').onclick = function () {
            to.update({velocity:1.0});
          };
          document.getElementById('pause').onclick = function () {
            to.update({velocity:0.0});
          };
          document.getElementById('reset').onclick = function () {
            to.update({position: 0.0, velocity: 0.0});
          };
          document.getElementById('back').onclick = function () {
            to.update({velocity: -1.0});
          };

          // Hook up text UI
          var value = document.getElementById('value');
          to.on("timeupdate", function () {
            value.innerHTML = to.query().position.toFixed(2);
          });

        }

        if (document.readyState === "complete") run();
        else window.onload = run;
      });
    </script>
  </head>
  <body>
    <h1>Test Schedule</h1>
    <div id="value"></div>
    <button id="play">Play</button>
    <button id="pause">Pause</button>
    <button id="reset">Reset</button>
    <button id="back">Back</button>
  </body>
</html>
